#+TITLE: PYIM 设计开发手册
#+AUTHOR: Feng Shu

* 整体架构
#+begin_example
+---------------------------------------------------------------------------------------------+
|     Emacs IM 接口 PYIM 实现层：                                                             |
|     -------------------------                                                               |
|     pyim-input-method, pyim-activate, pyim-deactivate                                       |
|     pyim-exit-from-minibuffer, pyim-mode-map                                                |
|     +---------------------------------------------------------------------------------+     |
|     | PYIM 用户命令层:                                                  PYIM 视图层： |     |
|     | ----------------                                                  ------------  |     |
|     | Pyim 输入法相关命令                                               Page          |     |
|     | Cregexp-Utils, Cstring-Utils                                      Preview       |     |
|     | Pymap-Utils, Dict-Manager                                         Indicator     |     |
|     |                                                                                 |     |
|     |                 +---------------------------------------------+                 |     |
|     | 自动上屏器:     | PYIM 用例层： Process                       |                 |     |
|     | ----------      |                                             |                 |     |
|     | Autoselector    |      +-------------------------------+      |                 |     |
|     |                 |      | PYIM 实体层：                 |      |                 |     |
|     |                 |      | -----------                   |      |                 |     |
|     |                 |      | Entered, Imobjs, Codes,       |      |                 |     |
|     |                 |      | Candidates, Outcome,          |      |                 |     |
|     |                 |      | Punctuations, Pinyin,         |      |                 |     |
|     |                 |      | Cstring, Cregexp,             |      |                 |     |
|     |                 |      | Scheme, Assistant-Scheme      |      |                 |     |
|     |                 |      +-------------------------------+      |                 |     |
|     |                 |      | Common, Dcache, Pymap         |      |                 |     |
|     |                 |      |                               |      |                 |     |
|     |                 |      +-------------------------------+      |                 |     |
|     |                 |                                             |                 |     |
|     |                 |                                             |                 |     |
|     |                 +---------------------------------------------+                 |     |
|     |                                                                                 |     |
|     |  PYIM 持久化层:    云输入法:                                      探针：        |     |
|     |  --------------    ---------                                      ------------  |     |
|     |  Dregcache         Cloudim                                        Probe         |     |
|     |  Dhashcache                                                                     |     |
|     |  Dict                                                                           |     |
|     +---------------------------------------------------------------------------------+     |
|                                                                                             |
+---------------------------------------------------------------------------------------------+
#+end_example
